-- Auto-generated by generate_schema.py
CREATE TABLE financial_metrics (
  company_id TEXT
  company_name TEXT
  line_item TEXT
  period_label TEXT
  period_type TEXT
  start_date DATE
  end_date DATE
  value NUMERIC
  value_type TEXT
  frequency TEXT
  currency TEXT
  source_file TEXT
  source_page INT
  source_type TEXT
  notes TEXT
  statement_type TEXT
  category TEXT
  PRIMARY KEY (company_id, line_item, period_label)
);

-- Seed line_item_definitions
INSERT INTO line_item_definitions (id, name, aliases, description) VALUES
  (11001, 'Revenue', '{sales,income,turnover,total_revenue,rev}'::TEXT[], 'Total revenue from operations'),
  (11002, 'Gross Profit', '{gross_profit,grossincome,gross income}'::TEXT[], 'Revenue minus cost of goods sold'),
  (11003, 'EBITDA', '{earnings_before_interest,earnings_before_taxes,earnings_before_interest_taxes,operating_profit}'::TEXT[], 'Earnings before interest, taxes, depreciation, amortization'),
  (11004, 'Operating Income', '{operating_profit,income_from_operations}'::TEXT[], 'Income from operations'),
  (11005, 'Net Income', '{net_profit,profit,earnings,net}'::TEXT[], 'Profit after all expenses'),
  (11006, 'Cash Flow', '{cashflow,net_cash_flow,cf}'::TEXT[], 'Net cash inflow/outflow'),
  (11007, 'EPS', '{earnings_per_share,eps_basic,eps_diluted}'::TEXT[], 'Earnings per share'),
  (11008, 'Total Assets', '{assets,assets_total}'::TEXT[], 'Total assets'),
  (11009, 'Total Liabilities', '{liabilities,liabilities_total,liab}'::TEXT[], 'Total liabilities'),
  (11010, 'Equity', '{shareholders_equity,equity_total,se}'::TEXT[], 'Shareholders'' equity')
ON CONFLICT (id) DO NOTHING;
